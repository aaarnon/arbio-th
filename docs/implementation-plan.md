# Ticketing Hub - Implementation Plan (Tiny Phases)

**Generated by:** Bob (Scrum Master)  
**Date:** November 2, 2025  
**For:** Arnon  
**Based on:** architecture.md

---

## Overview

This implementation plan breaks down the Ticketing Hub MVP into **very small, incremental phases**. Each phase is designed to be completed independently and builds upon the previous phases. This approach minimizes risk, enables early validation, and prevents overwhelming complexity.

---

## Phase 0: Project Foundation (30-45 minutes)

### ✅ Phase 0.1: Initialize Vite Project (10 minutes)
**Goal:** Create base React + TypeScript project with Vite

**Tasks:**
1. Run `npm create vite@latest ticketing-hub -- --template react-ts`
2. Navigate to project: `cd ticketing-hub`
3. Install dependencies: `npm install`
4. Verify dev server runs: `npm run dev`
5. Confirm TypeScript strict mode in `tsconfig.json`

**Validation:** Dev server runs at `http://localhost:5173` with default Vite page

---

### ✅ Phase 0.2: Setup Tailwind CSS (10 minutes)
**Goal:** Add Tailwind CSS for styling

**Tasks:**
1. Install Tailwind: `npm install -D tailwindcss postcss autoprefixer`
2. Initialize config: `npx tailwindcss init -p`
3. Update `tailwind.config.js` with content paths:
   ```js
   content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}']
   ```
4. Replace `src/index.css` with Tailwind directives:
   ```css
   @tailwind base;
   @tailwind components;
   @tailwind utilities;
   ```
5. Test by adding Tailwind class to App.tsx

**Validation:** Tailwind classes apply correctly in browser

---

### ✅ Phase 0.3: Setup React Router (10 minutes)
**Goal:** Add client-side routing foundation

**Tasks:**
1. Install: `npm install react-router-dom`
2. Wrap App with `BrowserRouter` in `main.tsx`
3. Create basic `App.tsx` with `Routes` and placeholder home route
4. Test navigation works

**Validation:** React Router renders without errors

---

### ✅ Phase 0.4: Install shadcn/ui Foundation (15 minutes)
**Goal:** Setup component library and install core components

**Tasks:**
1. Install shadcn: `npx shadcn-ui@latest init`
   - Choose "Default" style
   - Choose "Slate" as base color
   - Enable CSS variables: Yes
2. Install core components:
   ```bash
   npx shadcn-ui@latest add button
   npx shadcn-ui@latest add input
   npx shadcn-ui@latest add card
   npx shadcn-ui@latest add badge
   npx shadcn-ui@latest add dialog
   ```
3. Verify components created in `src/components/ui/`

**Validation:** UI components exist and can be imported

---

### ✅ Phase 0.5: Install Additional Dependencies (5 minutes)
**Goal:** Add form handling, date utilities, and notifications

**Tasks:**
1. Install form libraries: `npm install react-hook-form @hookform/resolvers zod`
2. Install date library: `npm install date-fns`
3. Install notifications: `npm install sonner`
4. Install dev dependencies: `npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom`

**Validation:** All packages in `package.json`

---

## Phase 1: Project Structure & Type System (45-60 minutes)

### ✅ Phase 1.1: Create Folder Structure (10 minutes)
**Goal:** Setup feature-based directory organization

**Tasks:**
1. Create folders in `src/`:
   ```
   features/
   components/layout/
   components/shared/
   components/ui/ (already exists)
   store/
   data/
   types/
   utils/
   hooks/
   routes/
   styles/
   ```
2. Create `.gitkeep` files to preserve empty directories

**Validation:** Folder structure matches architecture.md

---

### ✅ Phase 1.2: Define Core Enums (10 minutes)
**Goal:** Create shared enum types

**Tasks:**
1. Create `src/types/enums.ts`
2. Define `Status` type: `'TODO' | 'IN_PROGRESS' | 'DONE' | 'CANCELLED'`
3. Define `DomainType` type: `'PROPERTY' | 'RESERVATION' | 'FINANCE'`
4. Export all types

**Validation:** File compiles without errors, types are exportable

---

### ✅ Phase 1.3: Define Task Interface (10 minutes)
**Goal:** Create recursive Task type for hierarchy

**Tasks:**
1. Create `src/types/task.ts`
2. Define `Task` interface with:
   - id, title, description, status, assignedTo
   - `subtasks?: Task[]` (enables recursion)
   - createdAt, updatedAt
3. Import `Status` from enums
4. Add JSDoc comments

**Validation:** TypeScript compiles, recursive type works

---

### ✅ Phase 1.4: Define Case Interface (15 minutes)
**Goal:** Create main Case type

**Tasks:**
1. Create `src/types/case.ts`
2. Define `Case` interface with all properties per architecture
3. Import `Status`, `DomainType`, and `Task`
4. Mark optional fields: `propertyId?`, `reservationId?`, `assignedTo?`, `comments?`, `attachments?`
5. Add JSDoc comments

**Validation:** TypeScript compiles, Case type complete

---

### ✅ Phase 1.5: Define Supporting Interfaces (15 minutes)
**Goal:** Create User, Property, Reservation types

**Tasks:**
1. Create `src/types/user.ts` with `User` interface
2. Create `src/types/property.ts` with `Property` interface
3. Create `src/types/reservation.ts` with `Reservation` interface
4. Create `src/types/comment.ts` with `Comment` interface
5. Create `src/types/attachment.ts` with `Attachment` interface
6. Create `src/types/notification.ts` with `Notification` interface
7. Create `src/types/index.ts` to export all types

**Validation:** All types compile and export correctly

---

## Phase 2: Utility Functions & Constants (30 minutes)

### ✅ Phase 2.1: Date Utilities (15 minutes)
**Goal:** Create date formatting helpers

**Tasks:**
1. Create `src/utils/date.ts`
2. Implement `formatDate()` using date-fns
3. Implement `formatTime()`
4. Implement `formatDateTime()`
5. Implement `formatRelativeDate()`
6. Add JSDoc comments with examples

**Validation:** Functions work with test date strings

---

### ✅ Phase 2.2: Constants (10 minutes)
**Goal:** Define app-wide constants

**Tasks:**
1. Create `src/utils/constants.ts`
2. Define `STATUS_STYLES` object for badge colors
3. Define `DOMAIN_STYLES` object for domain badge colors
4. Define `MAX_NESTING_DEPTH = 10`
5. Export all constants

**Validation:** Constants are typed and exportable

---

### Phase 2.3: Validation Utilities (5 minutes)
**Goal:** Create helper validation functions

**Tasks:**
1. Create `src/utils/validation.ts`
2. Implement `canMarkTaskAsDone(task: Task): boolean` - checks if all subtasks are done
3. Add JSDoc comments

**Validation:** Function logic works correctly

---

## Phase 3: Mock Data Creation (45 minutes)

### ✅ Phase 3.1: Mock Users (10 minutes)
**Goal:** Create sample user data

**Tasks:**
1. Create `src/data/mockUsers.ts`
2. Define array of 5 users with different roles:
   - Property Manager
   - Guest Communication
   - Technician
   - Finance
3. Export `mockUsers` array

**Validation:** Data matches User interface

---

### ✅ Phase 3.2: Mock Properties (10 minutes)
**Goal:** Create sample property data

**Tasks:**
1. Create `src/data/mockProperties.ts`
2. Define 3 properties with varied statuses
3. Export `mockProperties` array

**Validation:** Data matches Property interface

---

### ✅ Phase 3.3: Mock Reservations (10 minutes)
**Goal:** Create sample reservation data

**Tasks:**
1. Create `src/data/mockReservations.ts`
2. Define 3 reservations linked to properties
3. Use realistic date ranges
4. Export `mockReservations` array

**Validation:** Data matches Reservation interface

---

### ✅ Phase 3.4: Mock Cases with Hierarchy (15 minutes)
**Goal:** Create 2 complete cases with nested tasks

**Tasks:**
1. Create `src/data/mockCases.ts`
2. Define first case (TK-2847) with:
   - 2 top-level tasks
   - First task has 2 subtasks
   - Mix of statuses
   - 1-2 comments
3. Define second case with different domain
4. Export `mockCases` array

**Validation:** Data matches Case interface, hierarchy renders correctly

---

## Phase 4: State Management Setup (60 minutes)

### ✅ Phase 4.1: Define State Types (15 minutes)
**Goal:** Create state and action types

**Tasks:**
1. Create `src/store/types.ts`
2. Define `CaseState` interface:
   - cases: Case[]
   - loading: boolean
   - error: string | null
3. Define `CaseAction` union type with all actions:
   - ADD_CASE, UPDATE_CASE, DELETE_CASE
   - ADD_TASK, UPDATE_TASK_STATUS, DELETE_TASK
   - ADD_COMMENT, ADD_ATTACHMENT
   - SET_LOADING, SET_ERROR
4. Export types

**Validation:** Types compile correctly

---

### ✅ Phase 4.2: Create Reducer (20 minutes)
**Goal:** Implement state reducer logic

**Tasks:**
1. Create `src/store/caseReducer.ts`
2. Implement reducer function with switch statement
3. Handle each action type immutably
4. For nested updates (tasks), use helper functions
5. Always update `updatedAt` timestamp
6. Export reducer

**Validation:** Reducer compiles, logic is sound

---

### ✅ Phase 4.3: Create Context Provider (15 minutes)
**Goal:** Setup React Context

**Tasks:**
1. Create `src/store/CaseContext.tsx`
2. Create context with `createContext()`
3. Implement `CaseProvider` component:
   - Initialize state with `useReducer`
   - Load mock data as initial state
   - Provide state and dispatch
4. Export provider

**Validation:** Provider renders without errors

---

### ✅ Phase 4.4: Create Custom Hook (10 minutes)
**Goal:** Add useCaseContext hook

**Tasks:**
1. In `src/store/CaseContext.tsx`, add `useCaseContext()` hook
2. Use `useContext()` to access context
3. Throw error if used outside provider
4. Export hook

**Validation:** Hook works in test component

---

## Phase 5: Layout Components (45 minutes)

### ✅ Phase 5.1: Create Navbar (20 minutes)
**Goal:** Build persistent navigation bar

**Tasks:**
1. Create `src/components/layout/Navbar.tsx`
2. Add app logo/title
3. Add navigation link to home (case list)
4. Add placeholder for notification bell (Epic 3)
5. Style with Tailwind (matching UX spec colors)
6. Make responsive for 1280px+ width

**Validation:** Navbar renders with styling

---

### ✅ Phase 5.2: Create Layout Component (15 minutes)
**Goal:** Create page layout wrapper

**Tasks:**
1. Create `src/components/layout/Layout.tsx`
2. Include Navbar
3. Add main content area with proper spacing
4. Accept children prop
5. Add appropriate semantic HTML (header, main)

**Validation:** Layout wraps content correctly

---

### ✅ Phase 5.3: Create Error Boundary (10 minutes)
**Goal:** Add error boundary for component errors

**Tasks:**
1. Create `src/components/layout/ErrorBoundary.tsx`
2. Implement class component with error boundary lifecycle
3. Create fallback error UI
4. Log errors to console

**Validation:** Boundary catches errors in development

---

## Phase 6: Shared UI Components (30 minutes)

### ✅ Phase 6.1: StatusBadge Component (10 minutes)
**Goal:** Reusable status badge

**Tasks:**
1. Create `src/components/shared/StatusBadge.tsx`
2. Accept `status` prop
3. Use `STATUS_STYLES` constant for colors
4. Render using shadcn Badge component
5. Format text (replace underscores with spaces)

**Validation:** Badge displays correctly for all statuses

---

### ✅ Phase 6.2: DomainBadge Component (10 minutes)
**Goal:** Reusable domain badge

**Tasks:**
1. Create `src/components/shared/DomainBadge.tsx`
2. Accept `domain` prop
3. Use `DOMAIN_STYLES` constant for colors
4. Render using shadcn Badge component

**Validation:** Badge displays correctly for all domains

---

### ✅ Phase 6.3: LoadingSkeleton & EmptyState (10 minutes)
**Goal:** Loading and empty states

**Tasks:**
1. Create `src/components/shared/LoadingSkeleton.tsx`
2. Use Tailwind animate-pulse for skeleton
3. Create `src/components/shared/EmptyState.tsx`
4. Accept message and optional action button

**Validation:** Components render correctly

---

## Phase 7: Case List Feature (Epic 1 - Part 1) (90 minutes)

### ✅ Phase 7.1: Create Feature Folder Structure (5 minutes)
**Goal:** Setup cases feature folders

**Tasks:**
1. Create `src/features/cases/components/`
2. Create `src/features/cases/hooks/`
3. Create `src/features/cases/types.ts`

**Validation:** Folders exist

---

### ✅ Phase 7.2: CaseListItem Component (25 minutes)
**Goal:** Individual case card/row

**Tasks:**
1. Create `src/features/cases/components/CaseListItem.tsx`
2. Accept `case` prop
3. Display: ID, title, status, domain, assignedTo, dates
4. Use StatusBadge and DomainBadge
5. Add click handler to navigate to detail
6. Style as card with hover effect
7. Format dates with utility functions

**Validation:** Case displays with all information

---

### ✅ Phase 7.3: CaseList Component (30 minutes)
**Goal:** List of all cases

**Tasks:**
1. Create `src/features/cases/components/CaseList.tsx`
2. Use `useCaseContext()` to get cases
3. Map over cases, render CaseListItem for each
4. Add "Create Case" button (opens modal later)
5. Show empty state if no cases
6. Add proper ARIA labels

**Validation:** List displays both mock cases

---

### ✅ Phase 7.4: Setup Routing (15 minutes)
**Goal:** Configure routes

**Tasks:**
1. Update `src/App.tsx` with Routes
2. Add route: `/` → CaseList
3. Add route: `/cases/:caseId` → Placeholder (CaseDetail later)
4. Add 404 route
5. Wrap in Layout component

**Validation:** Navigation to `/` shows case list

---

### ✅ Phase 7.5: Wire Up Context Provider (10 minutes)
**Goal:** Connect state to app

**Tasks:**
1. Update `src/main.tsx`
2. Wrap App with `CaseProvider`
3. Add `<Toaster />` from Sonner
4. Verify mock data loads

**Validation:** Cases display from context

---

### ✅ Phase 7.6: Add Filter Hook (5 minutes)
**Goal:** Setup filtering infrastructure

**Tasks:**
1. Create `src/features/cases/hooks/useCaseFilters.ts`
2. Create custom hook with filter state
3. Return filtered cases
4. Export hook

**Validation:** Hook compiles and works

---

## Phase 8: Case Filters (Epic 1 - Part 2) (30 minutes)

### ✅ Phase 8.1: Install Additional UI Components (5 minutes)
**Goal:** Add select components

**Tasks:**
1. Run: `npx shadcn-ui@latest add select`
2. Run: `npx shadcn-ui@latest add dropdown-menu`
3. Verify components installed

**Validation:** Components exist

---

### ✅ Phase 8.2: CaseFilters Component (25 minutes)
**Goal:** Filter controls for case list

**Tasks:**
1. Create `src/features/cases/components/CaseFilters.tsx`
2. Add status filter dropdown (All, TODO, IN_PROGRESS, DONE)
3. Add domain filter dropdown (All, PROPERTY, RESERVATION, FINANCE)
4. Add search input for title/description
5. Use shadcn Select components
6. Emit filter changes to parent
7. Style horizontally with proper spacing

**Validation:** Filters control case list

---

## Phase 9: Create Case Modal (Epic 1 - Part 3) (60 minutes)

### ✅ Phase 9.1: Install Form Components (5 minutes)
**Goal:** Add form UI components

**Tasks:**
1. Run: `npx shadcn-ui@latest add form`
2. Run: `npx shadcn-ui@latest add textarea`
3. Run: `npx shadcn-ui@latest add label`
4. Verify components installed

**Validation:** Form components exist

---

### ✅ Phase 9.2: Create Case Form Schema (10 minutes)
**Goal:** Define Zod validation schema

**Tasks:**
1. Create `src/features/cases/schemas.ts`
2. Define `caseSchema` with Zod:
   - title: min 1 character
   - description: min 10 characters
   - domain: enum
   - propertyId/reservationId: optional, at least one required
3. Export schema and inferred type

**Validation:** Schema validates correctly

---

### ✅ Phase 9.3: CreateCaseModal Component (45 minutes)
**Goal:** Modal form to create cases

**Tasks:**
1. Create `src/features/cases/components/CreateCaseModal.tsx`
2. Use shadcn Dialog for modal
3. Setup React Hook Form with Zod resolver
4. Add form fields:
   - Title input
   - Description textarea
   - Domain select
   - Property select (from mock data)
   - Reservation select (from mock data)
5. Implement submit handler:
   - Generate case ID (TK-####)
   - Dispatch ADD_CASE action
   - Show success toast
   - Close modal
6. Handle validation errors
7. Add cancel button

**Validation:** Can create new case via form

---

## Phase 10: Case Detail Page (Epic 2 - Part 1) (60 minutes)

### ✅ Phase 10.1: Create Feature Folders (5 minutes)
**Goal:** Setup case-detail feature structure

**Tasks:**
1. Create `src/features/case-detail/components/`
2. Create `src/features/case-detail/types.ts`

**Validation:** Folders exist

---

### ✅ Phase 10.2: CaseHeader Component (20 minutes)
**Goal:** Case detail header section

**Tasks:**
1. Create `src/features/case-detail/components/CaseHeader.tsx`
2. Display: Case ID, Title, Status badge, Domain badge
3. Display: Assigned to, Created date, Updated date
4. Add "Edit Case" button (functionality later)
5. Use date utilities for formatting
6. Style with proper hierarchy (large title, smaller metadata)

**Validation:** Header displays case information

---

### ✅ Phase 10.3: CaseDescription Component (15 minutes)
**Goal:** Display case description

**Tasks:**
1. Create `src/features/case-detail/components/CaseDescription.tsx`
2. Accept case prop
3. Display description with proper formatting
4. Add "Edit" button (inline edit later)
5. Style with card

**Validation:** Description displays correctly

---

### ✅ Phase 10.4: CaseDetail Main Component (20 minutes)
**Goal:** Main case detail page

**Tasks:**
1. Create `src/features/case-detail/components/CaseDetail.tsx`
2. Use `useParams()` to get caseId from URL
3. Get case from context using caseId
4. Handle case not found (404)
5. Render CaseHeader
6. Render CaseDescription
7. Add placeholder for task list (next phase)
8. Add proper layout and spacing

**Validation:** Can navigate to case detail page

---

## Phase 11: Task Display (Epic 2 - Part 2) (90 minutes)

### ✅ Phase 11.1: Create Tasks Feature Folders (5 minutes)
**Goal:** Setup tasks feature structure

**Tasks:**
1. Create `src/features/tasks/components/`
2. Create `src/features/tasks/hooks/`
3. Create `src/features/tasks/types.ts`

**Validation:** Folders exist

---

### ✅ Phase 11.2: TaskItem Component (30 minutes)
**Goal:** Individual task display with recursion

**Tasks:**
1. Create `src/features/tasks/components/TaskItem.tsx`
2. Accept props: `task`, `depth`, `onUpdate`
3. Calculate indent based on depth (20px per level)
4. Display: expand/collapse button (if has subtasks), ID, title, status
5. Add expand/collapse state
6. Recursively render subtasks when expanded
7. Increment depth for nested items
8. Add proper ARIA attributes (role="treeitem")
9. Style with proper visual hierarchy

**Validation:** Single task renders with nesting

---

### ✅ Phase 11.3: HierarchicalTaskList Component (20 minutes)
**Goal:** Container for task tree

**Tasks:**
1. Create `src/features/tasks/components/HierarchicalTaskList.tsx`
2. Accept `tasks` array prop
3. Render TaskItem for each root task
4. Start depth at 0
5. Add ARIA role="tree"
6. Handle empty state
7. Pass update handler down

**Validation:** Full task hierarchy displays

---

### ✅ Phase 11.4: Integrate Tasks into CaseDetail (10 minutes)
**Goal:** Show tasks on case detail page

**Tasks:**
1. Update `CaseDetail.tsx`
2. Import HierarchicalTaskList
3. Pass case.tasks to component
4. Add section heading "Tasks"
5. Position between description and bottom sections

**Validation:** Tasks appear on case detail page

---

### ✅ Phase 11.5: Status Change Hook (15 minutes)
**Goal:** Handle task status updates

**Tasks:**
1. Create `src/features/tasks/hooks/useTaskActions.ts`
2. Implement hook with:
   - `updateTaskStatus(caseId, taskId, newStatus)`
   - Dispatch to context
   - Show toast on success
   - Handle validation
3. Export hook

**Validation:** Hook updates task status

---

### ✅ Phase 11.6: Wire Up Status Changes (10 minutes)
**Goal:** Make status badges clickable

**Tasks:**
1. Update TaskItem component
2. Add onClick to StatusBadge
3. Use useTaskActions hook
4. Update status on click
5. Add dropdown for status selection

**Validation:** Can change task status via UI

---

## Phase 12: Status Validation (Epic 2 - Part 3) (45 minutes)

### ✅ Phase 12.1: Validation Hook (20 minutes)
**Goal:** Prevent invalid status changes

**Tasks:**
1. Create `src/features/tasks/hooks/useStatusValidation.ts`
2. Implement `canMarkAsDone(task)`:
   - Check if all subtasks are DONE or CANCELLED
   - Return boolean
3. Implement `validateStatusChange(task, newStatus)`:
   - If newStatus is DONE, check subtasks
   - Return { valid: boolean, message?: string }
4. Export hook

**Validation:** Validation logic works correctly

---

### ✅ Phase 12.2: Integrate Validation (15 minutes)
**Goal:** Block invalid status changes

**Tasks:**
1. Update useTaskActions hook
2. Call validation before updating status
3. Show error toast if validation fails
4. Don't dispatch if invalid
5. Show specific error message

**Validation:** Cannot mark parent as DONE with incomplete subtasks

---

### ✅ Phase 12.3: Visual Indicators (10 minutes)
**Goal:** Show which tasks can be marked done

**Tasks:**
1. Update TaskItem component
2. Disable/gray out DONE option if subtasks incomplete
3. Add tooltip explaining why
4. Use proper ARIA attributes

**Validation:** Visual feedback for validation

---

## Phase 13: Task Creation (Epic 2 - Part 4) (60 minutes)

### ✅ Phase 13.1: Task Form Schema (10 minutes)
**Goal:** Define validation for task creation

**Tasks:**
1. Create `src/features/tasks/schemas.ts`
2. Define `taskSchema`:
   - title: min 1 character
   - description: optional
   - assignedTo: optional
3. Export schema and type

**Validation:** Schema compiles

---

### ✅ Phase 13.2: CreateTaskForm Component (30 minutes)
**Goal:** Form to add top-level task

**Tasks:**
1. Create `src/features/tasks/components/CreateTaskForm.tsx`
2. Use React Hook Form with Zod
3. Add fields: title, description, assignedTo
4. Implement submit:
   - Generate task ID (caseId.N)
   - Dispatch ADD_TASK action
   - Clear form
   - Show success toast
5. Style as compact form

**Validation:** Can create task via form

---

### ✅ Phase 13.3: CreateSubtaskForm Component (20 minutes)
**Goal:** Form to add subtask to existing task

**Tasks:**
1. Create `src/features/tasks/components/CreateSubtaskForm.tsx`
2. Similar to CreateTaskForm but for subtasks
3. Accept `parentTask` prop
4. Generate subtask ID (parentId.N)
5. Dispatch ADD_SUBTASK action (needs to be added to reducer)

**Validation:** Can create subtask

---

## ✅ Phase 14: Task Editing (Epic 2 - Part 5) (45 minutes)

### ✅ Phase 14.1: EditTaskForm Component (25 minutes)
**Goal:** Inline task editing

**Tasks:**
1. Create `src/features/tasks/components/EditTaskForm.tsx`
2. Pre-populate form with task data
3. Similar structure to CreateTaskForm
4. Dispatch UPDATE_TASK action
5. Show success toast

**Validation:** Can edit task inline

---

### ✅ Phase 14.2: Add Edit Mode to TaskItem (20 minutes)
**Goal:** Toggle between view and edit

**Tasks:**
1. Update TaskItem component
2. Add edit mode state
3. Show EditTaskForm when in edit mode
4. Add "Edit" button (pencil icon)
5. Add "Cancel" and "Save" buttons in edit mode
6. Toggle between modes

**Validation:** Can edit task from detail view

---

## Phase 15: Context Sidebar (Epic 3 - Part 1) (90 minutes)

### Phase 15.1: Create Context Feature Folders (5 minutes)
**Goal:** Setup context sidebar structure

**Tasks:**
1. Create `src/features/context/components/`
2. Create `src/features/context/types.ts`

**Validation:** Folders exist

---

### Phase 15.2: ContextSidebar Layout (20 minutes)
**Goal:** Right sidebar container

**Tasks:**
1. Create `src/features/context/components/ContextSidebar.tsx`
2. Accept `case` prop
3. Create fixed-width sidebar (320px)
4. Position on right side of case detail
5. Add tabs/sections for Property, Reservation, Guest
6. Style with border and background

**Validation:** Sidebar appears on case detail page

---

### Phase 15.3: PropertyContextPanel (25 minutes)
**Goal:** Display linked property details

**Tasks:**
1. Create `src/features/context/components/PropertyContextPanel.tsx`
2. Accept `propertyId` prop
3. Fetch property from mock data
4. Display: Unit ID, Address, Status, Last Maintenance
5. Handle case when no property linked
6. Style as info panel

**Validation:** Property details display

---

### Phase 15.4: ReservationContextPanel (25 minutes)
**Goal:** Display linked reservation details

**Tasks:**
1. Create `src/features/context/components/ReservationContextPanel.tsx`
2. Accept `reservationId` prop
3. Fetch reservation from mock data
4. Display: Guest Name, Check-in/out, Nights, Value
5. Handle case when no reservation linked
6. Style as info panel

**Validation:** Reservation details display

---

### Phase 15.5: GuestCommunicationPanel (15 minutes)
**Goal:** Placeholder for guest communication

**Tasks:**
1. Create `src/features/context/components/GuestCommunicationPanel.tsx`
2. Show placeholder message
3. Add "Send Message" button (non-functional for MVP)
4. Style consistently

**Validation:** Panel renders

---

## ✅ Phase 16: Comments (Epic 3 - Part 2) (75 minutes)

### Phase 16.1: Create Collaboration Feature Folders (5 minutes)
**Goal:** Setup collaboration structure

**Tasks:**
1. Create `src/features/collaboration/components/`
2. Create `src/features/collaboration/types.ts`

**Validation:** Folders exist

---

### Phase 16.2: CommentItem Component (20 minutes)
**Goal:** Individual comment display

**Tasks:**
1. Create `src/features/collaboration/components/CommentItem.tsx`
2. Accept `comment` prop
3. Display: User avatar/name, timestamp, text
4. Format timestamp with date utilities
5. Style as chat message

**Validation:** Comment displays correctly

---

### Phase 16.3: CommentInput Component (25 minutes)
**Goal:** Input for new comments

**Tasks:**
1. Create `src/features/collaboration/components/CommentInput.tsx`
2. Use controlled textarea
3. Add "Post Comment" button
4. Implement submit:
   - Generate comment ID
   - Dispatch ADD_COMMENT action
   - Clear input
   - Show success toast
5. Add character count
6. Handle empty submission

**Validation:** Can post comment

---

### Phase 16.4: CommentThread Component (20 minutes)
**Goal:** List of all comments

**Tasks:**
1. Create `src/features/collaboration/components/CommentThread.tsx`
2. Accept `comments` array
3. Map over comments, render CommentItem
4. Show in chronological order
5. Add CommentInput at bottom (always visible)
6. Handle empty state
7. Add scroll container

**Validation:** Comment thread displays

---

### Phase 16.5: Integrate Comments (5 minutes)
**Goal:** Add comments to case detail

**Tasks:**
1. Update CaseDetail component
2. Import CommentThread
3. Pass case.comments
4. Position below tasks section
5. Add section heading

**Validation:** Comments appear on page

---

## ✅ Phase 17: Attachments (Epic 3 - Part 3) (60 minutes)

### Phase 17.1: AttachmentItem Component (20 minutes)
**Goal:** Display single attachment

**Tasks:**
1. Create `src/features/collaboration/components/AttachmentItem.tsx`
2. Accept `attachment` prop
3. Display: File icon (based on type), name, size, uploaded by, date
4. Add download button (mock href)
5. Style as card

**Validation:** Attachment displays

---

### Phase 17.2: AttachmentGrid Component (15 minutes)
**Goal:** Grid of attachments

**Tasks:**
1. Create `src/features/collaboration/components/AttachmentGrid.tsx`
2. Accept `attachments` array
3. Render in grid layout (3 columns)
4. Handle empty state
5. Add "Upload" button (mock for MVP)

**Validation:** Grid displays attachments

---

### Phase 17.3: Mock File Upload (15 minutes)
**Goal:** Simulate file attachment

**Tasks:**
1. Add file input (hidden)
2. Trigger on button click
3. Create mock attachment object from file
4. Dispatch ADD_ATTACHMENT action
5. Show success toast
6. Display in grid

**Validation:** Can "upload" file (mock)

---

### Phase 17.4: Integrate Attachments (10 minutes)
**Goal:** Add attachments to case detail

**Tasks:**
1. Update CaseDetail component
2. Import AttachmentGrid
3. Pass case.attachments
4. Position below comments
5. Add section heading

**Validation:** Attachments appear on page

---

## ✅ Phase 18: Notifications (Epic 3 - Part 4) (60 minutes)

---

## ✅ Phase 19: Polish & Accessibility (20 minutes)

---

## ✅ Phase 20: Testing (15 minutes)

---

## ✅ Phase 21: Final Polish (15 minutes)

---

## ✅ Phase 22: Deployment (20 minutes)

### Phase 18.1: Create Notifications Feature Folders (5 minutes)
**Goal:** Setup notifications structure

**Tasks:**
1. Create `src/features/notifications/components/`
2. Create `src/features/notifications/types.ts`

**Validation:** Folders exist

---

### Phase 18.2: Mock Notifications Data (10 minutes)
**Goal:** Create notification samples

**Tasks:**
1. Create `src/data/mockNotifications.ts`
2. Define 5 sample notifications
3. Mix of read/unread
4. Different types (assignment, status change, comment)
5. Export array

**Validation:** Data matches Notification interface

---

### Phase 18.3: NotificationItem Component (15 minutes)
**Goal:** Individual notification

**Tasks:**
1. Create `src/features/notifications/components/NotificationItem.tsx`
2. Accept `notification` prop
3. Display: Type icon, message, timestamp, case link
4. Style differently for unread (bold, background)
5. Add click to mark as read

**Validation:** Notification displays

---

### Phase 18.4: NotificationDropdown Component (20 minutes)
**Goal:** Dropdown list of notifications

**Tasks:**
1. Create `src/features/notifications/components/NotificationDropdown.tsx`
2. Use shadcn DropdownMenu
3. Map over notifications
4. Render NotificationItem for each
5. Add "Mark All Read" button
6. Add "View All" link
7. Show empty state
8. Limit to 5 most recent

**Validation:** Dropdown shows notifications

---

### Phase 18.5: NotificationBell Component (10 minutes)
**Goal:** Bell icon with unread count

**Tasks:**
1. Create `src/features/notifications/components/NotificationBell.tsx`
2. Show bell icon
3. Display unread count badge
4. Trigger dropdown on click
5. Style in navbar

**Validation:** Bell shows count

---

### Phase 18.6: Integrate in Navbar (5 minutes)
**Goal:** Add bell to navbar

**Tasks:**
1. Update Navbar component
2. Import NotificationBell
3. Position on right side
4. Load notifications from mock data (later from context)

**Validation:** Bell appears in navbar

---

## Phase 19: Polish & Accessibility (60 minutes)

### Phase 19.1: Keyboard Navigation (20 minutes)
**Goal:** Ensure keyboard accessibility

**Tasks:**
1. Test tab navigation through all interactive elements
2. Add focus indicators to custom components
3. Ensure modals trap focus
4. Add keyboard shortcuts:
   - Escape to close modals
   - Enter to submit forms
5. Test task tree navigation with arrow keys

**Validation:** All features keyboard accessible

---

### Phase 19.2: ARIA Labels (20 minutes)
**Goal:** Screen reader support

**Tasks:**
1. Add ARIA labels to all icon buttons
2. Add aria-live regions for dynamic content
3. Add role="tree" and "treeitem" to task hierarchy
4. Add aria-expanded to collapsible elements
5. Test with screen reader

**Validation:** Screen reader announces correctly

---

### Phase 19.3: Loading States (10 minutes)
**Goal:** Add loading indicators

**Tasks:**
1. Update CaseList to show skeleton while "loading"
2. Add loading state to CaseDetail
3. Show skeleton for task list
4. Add loading state to buttons during actions

**Validation:** Loading states appear correctly

---

### Phase 19.4: Error States (10 minutes)
**Goal:** Improve error handling UI

**Tasks:**
1. Create error fallback component
2. Add error state to CaseList (retry button)
3. Add 404 page for invalid case IDs
4. Improve error toast messages
5. Add error logging

**Validation:** Errors display user-friendly messages

---

## Phase 20: Testing (90 minutes)

### Phase 20.1: Setup Vitest (15 minutes)
**Goal:** Configure test environment

**Tasks:**
1. Create `vitest.config.ts`
2. Configure jsdom environment
3. Create `tests/setup.ts` with testing library imports
4. Update package.json scripts
5. Create sample test file

**Validation:** `npm run test` works

---

### Phase 20.2: Type Tests (15 minutes)
**Goal:** Test TypeScript interfaces

**Tasks:**
1. Create `tests/types/case.test.ts`
2. Test Case interface with valid data
3. Test Task recursive structure
4. Test enum types
5. Run tests

**Validation:** All type tests pass

---

### Phase 20.3: Utility Tests (20 minutes)
**Goal:** Test utility functions

**Tasks:**
1. Create `tests/utils/date.test.ts`
2. Test all date formatting functions
3. Create `tests/utils/validation.test.ts`
4. Test `canMarkTaskAsDone` with various scenarios
5. Run tests

**Validation:** All utility tests pass

---

### Phase 20.4: Component Tests (30 minutes)
**Goal:** Test critical components

**Tasks:**
1. Create `tests/components/StatusBadge.test.tsx`
2. Test badge rendering for all statuses
3. Create `tests/components/TaskItem.test.tsx`
4. Test task display and recursion
5. Test expand/collapse functionality
6. Run tests

**Validation:** Component tests pass

---

### Phase 20.5: Integration Tests (10 minutes)
**Goal:** Test user flows

**Tasks:**
1. Create `tests/integration/caseFlow.test.tsx`
2. Test: View case list → Click case → View details
3. Test: Create case flow
4. Test: Update task status flow
5. Run tests

**Validation:** Integration tests pass

---

## Phase 21: Final Polish (45 minutes)

### Phase 21.1: Responsive Tweaks (15 minutes)
**Goal:** Optimize for 1280px+ desktop

**Tasks:**
1. Test at 1280px, 1440px, 1920px widths
2. Adjust spacing and sizing
3. Ensure sidebar doesn't overflow
4. Fix any layout issues

**Validation:** Looks good at all desktop sizes

---

### Phase 21.2: Performance Optimization (15 minutes)
**Goal:** Improve performance

**Tasks:**
1. Add React.memo to TaskItem
2. Add useMemo to filtered case lists
3. Add useCallback to event handlers in lists
4. Check bundle size with `npm run build`

**Validation:** Performance feels snappy

---

### Phase 21.3: Documentation (15 minutes)
**Goal:** Update README

**Tasks:**
1. Update README.md with:
   - Project description
   - Setup instructions
   - Available scripts
   - Architecture overview
   - Feature list
2. Add code comments to complex functions
3. Add JSDoc to public APIs

**Validation:** README is clear and complete

---

## Phase 22: Deployment (30 minutes)

### Phase 22.1: Build Configuration (10 minutes)
**Goal:** Optimize production build

**Tasks:**
1. Review vite.config.ts
2. Ensure sourcemaps disabled for prod
3. Configure asset optimization
4. Test build: `npm run build`
5. Test preview: `npm run preview`

**Validation:** Production build works

---

### Phase 22.2: Deploy to Vercel (20 minutes)
**Goal:** Deploy MVP to production

**Tasks:**
1. Create Vercel account (if needed)
2. Install Vercel CLI: `npm i -g vercel`
3. Run `vercel` in project directory
4. Follow prompts
5. Test deployed URL
6. Share with stakeholders

**Validation:** App is live and accessible

---

## Summary

**Total Phases:** 22 major phases  
**Total Estimated Time:** ~20-24 hours of focused development  
**Tiny Steps:** Each phase is 5-90 minutes, highly focused  

### Key Milestones

- ✅ **Phase 0-1:** Foundation (1.5 hours)
- ✅ **Phase 2-3:** Data layer (1.25 hours)
- ✅ **Phase 4-6:** Core infrastructure (2.5 hours)
- ✅ **Phase 7-9:** Epic 1 - Case Management (3 hours)
- ✅ **Phase 10-14:** Epic 2 - Task Hierarchy (5 hours)
- ✅ **Phase 15-18:** Epic 3 - Collaboration (4.75 hours)
- ✅ **Phase 19-20:** Quality & Testing (2.5 hours)
- ✅ **Phase 21-22:** Launch (1.25 hours)

### Recommended Approach

1. **Complete phases in order** - Each builds on previous
2. **Validate after each phase** - Ensure it works before moving on
3. **Commit frequently** - After each phase completion
4. **Take breaks** - Don't rush through phases
5. **Test early and often** - Don't wait until Phase 20

### Next Steps

Would you like me to:
1. Break down any specific phase into even smaller sub-tasks?
2. Create user stories for each phase?
3. Generate a sprint plan grouping phases into 2-week sprints?
4. Set up the initial project structure (Phase 0)?

Let me know how you'd like to proceed, Arnon!

---

_Generated by Bob, Scrum Master_  
_BMAD BMM Method_

